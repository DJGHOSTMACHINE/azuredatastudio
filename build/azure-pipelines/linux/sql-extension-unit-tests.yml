parameters:
  extensions: []

steps:
  - ${{each extension in parameters.extensions}}:
  - script: |
      set -e
      APP_ROOT=$(agent.builddirectory)/azuredatastudio-linux-x64
      APP_NAME=$(node -p "require(\"$APP_ROOT/resources/app/product.json\").applicationName")
      INTEGRATION_TEST_ELECTRON_PATH="$APP_ROOT/$APP_NAME" \
      DISPLAY=:10 ./scripts/test-extensions-unit.js ${{ extension }}
    displayName: 'Run ${{ extension }} Stable Extension Unit Tests'
    condition: and(succeeded(), eq(variables['RUN_TESTS'], 'true'))
